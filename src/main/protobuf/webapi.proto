package com.geeksville.dapi;

option java_package = "com.geeksville.dapi";


message LoginMsg {
	required string username = 1;
	required string password = 2;
}

message MavlinkMsg {
	required sint32 srcInterface = 1;
	repeated bytes packets = 2;
}

// Enums used to decode the super large envelope variant (not using a variant record is also an option but this made for an easy experiment similar 
// to how I've used protobufs in the past)
enum EnvelopeMsgCode {
	LoginMsgCode = 10;
	MavlinkMsgCode = 11;
}

// Envelope to contain all the messages. At any time, ONLY 1 of the optional fields can be used.
message Envelope {
  	// Identifies which field is filled in.
  	required EnvelopeMsgCode type = 3;

	// Payloads
	optional LoginMsg heartbeat = 10;
	optional MavlinkMsg mavlink = 11;
}
